{"version":3,"sources":["assets\\script\\lib\\socket.io.js"],"names":["cc","sys","isNative","f","exports","module","define","amd","g","window","global","self","io","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_dereq_","parser","transports","Emitter","debug","index","parseuri","parsejson","parseqs","Socket","noop","uri","opts","hostname","host","secure","protocol","port","query","location","agent","decode","upgrade","path","replace","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","readyState","writeBuffer","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","undefined","freeGlobal","extraHeaders","Object","keys","open","priorWebsocketSuccess","prototype","Transport","createTransport","name","clone","EIO","transport","id","sid","socket","obj","hasOwnProperty","indexOf","setTimeout","emit","shift","setTransport","removeAllListeners","on","onDrain","packet","onPacket","onError","onClose","probe","failed","onTransportOpen","upgradeLosesBinary","supportsBinary","send","type","data","once","msg","upgrading","pause","cleanup","flush","err","freezeTransport","close","onerror","error","onTransportClose","onclose","onupgrade","to","removeListener","onOpen","upgrades","onHandshake","setPing","filterUpgrades","pingInterval","pingTimeout","onHeartbeat","timeout","clearTimeout","pingTimeoutTimer","pingIntervalTimer","ping","sendPacket","splice","prevBufferLen","writable","write","options","fn","compress","push","waitForUpgrade","cleanupAndClose","reason","desc","filteredUpgrades","j","description","doOpen","doClose","packets","onData","decodePacket","XMLHttpRequest","XHR","JSONP","websocket","polling","xhr","xd","xs","isSSL","xdomain","xscheme","Polling","inherit","JSONPPolling","rNewline","rEscapedNewline","callbacks","empty","___eio","document","addEventListener","script","parentNode","removeChild","form","iframe","doPoll","createElement","async","src","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","isUAgecko","navigator","test","userAgent","doWrite","area","iframeId","className","style","position","top","left","target","method","setAttribute","action","complete","initIframe","html","value","submit","attachEvent","onreadystatechange","onload","Request","request","isBinary","req","sendXhr","pollXhr","create","setDisableHeaderCheck","setRequestHeader","responseType","withCredentials","hasXDR","onLoad","responseText","status","requestsCount","requests","onSuccess","fromError","abort","contentType","getResponseHeader","split","response","String","fromCharCode","apply","Uint8Array","ui8Arr","dataArray","idx","XDomainRequest","unloadHandler","yeast","hasXHR2","poll","onPause","pending","total","callback","decodePayload","callbackfn","encodePayload","schema","b64","encode","ipv6","BrowserWebSocket","WebSocket","MozWebSocket","WS","check","protocols","headers","ws","supports","binary","addEventListeners","onopen","onmessage","ev","encodePacket","len","Buffer","byteLength","done","hasCORS","ActiveXObject","after","count","err_cb","bail","proxy","result","arraybuffer","start","end","bytes","slice","ArrayBuffer","abv","ii","buffer","chars","base64","substring","bufferLength","p","encoded1","encoded2","encoded3","encoded4","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","Blob","size","blobSupportsArrayBufferView","b","blobBuilderSupported","append","getBlob","mapArrayBufferViews","ary","chunk","buf","copy","set","byteOffset","BlobBuilderConstructor","bb","BlobConstructor","mixin","event","_callbacks","off","arguments","removeEventListener","cb","args","listeners","hasListeners","constructor","log","formatArgs","save","load","useColors","storage","chrome","local","localstorage","colors","documentElement","console","firebug","exception","table","toLowerCase","match","parseInt","RegExp","$1","formatters","v","JSON","stringify","namespace","humanize","diff","c","color","concat","Array","lastC","Function","namespaces","removeItem","enable","localStorage","coerce","disable","enabled","names","skips","prevColor","prevTime","selectColor","disabled","curr","Date","ms","prev","format","formatter","val","logFn","bind","substr","stack","message","hasBinary","sliceBuffer","base64encoder","utf8","isAndroid","isPhantomJS","dontSendBlobs","pong","packetslist","utf8encode","encodeArrayBuffer","encodeBlob","encodeBase64Object","encoded","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","FileReader","readAsArrayBuffer","blob","readAsDataURL","b64data","typed","basic","btoa","utf8decode","charAt","decodeBase64Packet","Number","asArray","rest","encodePayloadAsBlob","encodePayloadAsArrayBuffer","setLengthHeader","encodeOne","doneCallback","map","results","join","each","next","eachWithIndex","el","decodePayloadAsBinary","chr","ret","encodedPackets","totalLength","reduce","acc","toString","resultArray","bufferIndex","forEach","isString","ab","view","charCodeAt","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","numberTooLong","tailArray","msgLength","arr","has","isArray","_hasBinary","isBuffer","File","toJSON","m","h","d","y","parse","long","short","str","exec","parseFloat","Math","round","plural","floor","ceil","rvalidchars","rvalidescape","rvalidtokens","rvalidbraces","rtrimLeft","rtrimRight","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","re","parts","source","authority","ipv6uri","root","freeExports","freeModule","stringFromCharCode","ucs2decode","string","output","counter","extra","ucs2encode","array","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","symbol","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","tmp","nodeType","object","alphabet","seed","num","decoded","now","url","Manager","lookup","cache","managers","parsed","sameNamespace","nsps","newConnection","forceNew","multiplex","connect","eio","Backoff","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","min","max","jitter","connecting","lastPing","encoding","packetBuffer","encoder","Encoder","decoder","Decoder","autoConnect","emitAll","nsp","updateSocketIds","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","skipReconnect","openSub","errorSub","timer","destroy","onping","onpong","ondata","add","ondecoded","onConnecting","processPacketQueue","pack","sub","disconnect","reset","delay","duration","onreconnect","attempt","toArray","hasBin","events","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","subEvents","unshift","parserType","EVENT","BINARY_EVENT","flags","pop","CONNECT","onpacket","onconnect","onevent","ACK","onack","BINARY_ACK","DISCONNECT","ondisconnect","ERROR","ack","sent","emitBuffered","loc","href","factor","pow","rand","random","deviation","isBuf","deconstructPacket","packetData","_deconstructPacket","placeholder","_placeholder","newData","attachments","reconstructPacket","curPlaceHolder","_reconstructPacket","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","bloblessData","types","encodeAsBinary","encodeAsString","writeEncoding","deconstruction","reconstructor","decodeString","BinaryReconstructor","reconPack","takeBinaryData","finishedReconstruction","binData","isLoader","objectTypes","runInContext","context","SyntaxError","TypeError","nativeJSON","objectProto","getClass","isProperty","undef","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","isSupported","serialized","stringifySupported","parseSupported","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","Months","getDay","year","month","property","members","__proto__","original","parent","Properties","valueOf","isFunction","hasProperty","isConstructor","Escapes","leadingZeroes","toPaddedString","width","unicodePrefix","quote","useCharIndex","symbols","charCode","serialize","properties","whitespace","indentation","date","time","hours","minutes","seconds","milliseconds","element","prefix","filter","Unescapes","Index","Source","lex","begin","isSigned","get","hasMembers","update","walk","previousJSON","isRestored","JSON3","list"],"mappings":"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","file":"unknown","sourcesContent":["if(!cc.sys.isNative){\n    (function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.io = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\nmodule.exports =  _dereq_('./lib/');\n\n},{\"./lib/\":2}],2:[function(_dereq_,module,exports){\n\nmodule.exports = _dereq_('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = _dereq_('engine.io-parser');\n\n},{\"./socket\":3,\"engine.io-parser\":19}],3:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar transports = _dereq_('./transports');\nvar Emitter = _dereq_('component-emitter');\nvar debug = _dereq_('debug')('engine.io-client:socket');\nvar index = _dereq_('indexof');\nvar parser = _dereq_('engine.io-parser');\nvar parseuri = _dereq_('parseuri');\nvar parsejson = _dereq_('parsejson');\nvar parseqs = _dereq_('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Noop function.\n *\n * @api private\n */\n\nfunction noop(){}\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket(uri, opts){\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' == typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol == 'https' || uri.protocol == 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure :\n    (global.location && 'https:' == location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port ?\n       location.port :\n       (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' == typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? null : opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  var freeGlobal = typeof global == 'object' && global;\n  if (freeGlobal.global === freeGlobal) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n  }\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = _dereq_('./transport');\nSocket.transports = _dereq_('./transports');\nSocket.parser = _dereq_('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    agent: this.agent,\n    hostname: this.hostname,\n    port: this.port,\n    secure: this.secure,\n    path: this.path,\n    query: query,\n    forceJSONP: this.forceJSONP,\n    jsonp: this.jsonp,\n    forceBase64: this.forceBase64,\n    enablesXDR: this.enablesXDR,\n    timestampRequests: this.timestampRequests,\n    timestampParam: this.timestampParam,\n    policyPort: this.policyPort,\n    socket: this,\n    pfx: this.pfx,\n    key: this.key,\n    passphrase: this.passphrase,\n    cert: this.cert,\n    ca: this.ca,\n    ciphers: this.ciphers,\n    rejectUnauthorized: this.rejectUnauthorized,\n    perMessageDeflate: this.perMessageDeflate,\n    extraHeaders: this.extraHeaders\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') != -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function() {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function(transport){\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function(){\n    self.onDrain();\n  })\n  .on('packet', function(packet){\n    self.onPacket(packet);\n  })\n  .on('error', function(e){\n    self.onError(e);\n  })\n  .on('close', function(){\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 })\n    , failed = false\n    , self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen(){\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' == msg.type && 'probe' == msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' == transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' == self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport() {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  //Handle any error that happens while probing\n  function onerror(err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose(){\n    onerror(\"transport closed\");\n  }\n\n  //When the socket is closed while we're probing\n  function onclose(){\n    onerror(\"socket closed\");\n  }\n\n  //When the socket is upgraded while we're probing\n  function onupgrade(to){\n    if (transport && to.name != transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  //Remove all listeners on the transport and on self\n  function cleanup(){\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' == this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' == this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(parsejson(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if  ('closed' == this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' == self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function(){\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function() {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' != this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if('function' == typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' == typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' == this.readyState || 'closed' == this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function() {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close() {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose() {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade() {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' == this.readyState || 'open' == this.readyState || 'closing' == this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i<j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./transport\":4,\"./transports\":5,\"component-emitter\":15,\"debug\":17,\"engine.io-parser\":19,\"indexof\":23,\"parsejson\":26,\"parseqs\":27,\"parseuri\":28}],4:[function(_dereq_,module,exports){\n/**\n * Module dependencies.\n */\n\nvar parser = _dereq_('engine.io-parser');\nvar Emitter = _dereq_('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' == this.readyState || '' == this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function(packets){\n  if ('open' == this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function(data){\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n\n},{\"component-emitter\":15,\"engine.io-parser\":19}],5:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\nvar XHR = _dereq_('./polling-xhr');\nvar JSONP = _dereq_('./polling-jsonp');\nvar websocket = _dereq_('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling(opts){\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname != location.hostname || port != opts.port;\n    xs = opts.secure != isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./polling-jsonp\":6,\"./polling-xhr\":7,\"./websocket\":9,\"xmlhttprequest-ssl\":10}],6:[function(_dereq_,module,exports){\n(function (global){\n\n/**\n * Module requirements.\n */\n\nvar Polling = _dereq_('./polling');\nvar inherit = _dereq_('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Callbacks count.\n */\n\nvar index = 0;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function(e){\n    self.onError('jsonp poll error',e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  }\n  else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' != typeof navigator && /gecko/i.test(navigator.userAgent);\n  \n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"'+ self.iframeId +'\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch(e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function(){\n      if (self.iframe.readyState == 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./polling\":8,\"component-inherit\":16}],7:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\nvar Polling = _dereq_('./polling');\nvar Emitter = _dereq_('component-emitter');\nvar inherit = _dereq_('component-inherit');\nvar debug = _dereq_('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty(){}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR(opts){\n  Polling.call(this, opts);\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname != global.location.hostname ||\n      port != opts.port;\n    this.xs = opts.secure != isSSL;\n  } else {\n    this.extraHeaders = opts.extraHeaders;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function(opts){\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function(data, fn){\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function(err){\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function(){\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function(data){\n    self.onData(data);\n  });\n  req.on('error', function(err){\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request(opts){\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined != opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function(){\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n    if (this.supportsBinary) {\n      // This has to be done after open because Firefox is stupid\n      // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n      xhr.responseType = 'arraybuffer';\n    }\n\n    if ('POST' == this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function(){\n        self.onLoad();\n      };\n      xhr.onerror = function(){\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function(){\n        if (4 != xhr.readyState) return;\n        if (200 == xhr.status || 1223 == xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function(){\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function() {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function(){\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function(data){\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function(err){\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function(fromError){\n  if ('undefined' == typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch(e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function(){\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response;\n    } else {\n      if (!this.supportsBinary) {\n        data = this.xhr.responseText;\n      } else {\n        try {\n          data = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));\n        } catch (e) {\n          var ui8Arr = new Uint8Array(this.xhr.response);\n          var dataArray = [];\n          for (var idx = 0, length = ui8Arr.length; idx < length; idx++) {\n            dataArray.push(ui8Arr[idx]);\n          }\n\n          data = String.fromCharCode.apply(null, dataArray);\n        }\n      }\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function(){\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function(){\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nif (global.document) {\n  Request.requestsCount = 0;\n  Request.requests = {};\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./polling\":8,\"component-emitter\":15,\"component-inherit\":16,\"debug\":17,\"xmlhttprequest-ssl\":10}],8:[function(_dereq_,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Transport = _dereq_('../transport');\nvar parseqs = _dereq_('parseqs');\nvar parser = _dereq_('engine.io-parser');\nvar inherit = _dereq_('component-inherit');\nvar yeast = _dereq_('yeast');\nvar debug = _dereq_('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function() {\n  var XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling(opts){\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function(){\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function(onPause){\n  var pending = 0;\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause(){\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function(){\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function(){\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function(){\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function(data){\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function(packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' == self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' == packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' != this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' == this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function(){\n  var self = this;\n\n  function close(){\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' == this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function(packets){\n  var self = this;\n  this.writable = false;\n  var callbackfn = function() {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  var self = this;\n  parser.encodePayload(packets, this.supportsBinary, function(data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function(){\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' == schema && this.port != 443) ||\n     ('http' == schema && this.port != 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n},{\"../transport\":4,\"component-inherit\":16,\"debug\":17,\"engine.io-parser\":19,\"parseqs\":27,\"xmlhttprequest-ssl\":10,\"yeast\":30}],9:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar Transport = _dereq_('../transport');\nvar parser = _dereq_('engine.io-parser');\nvar parseqs = _dereq_('parseqs');\nvar inherit = _dereq_('component-inherit');\nvar yeast = _dereq_('yeast');\nvar debug = _dereq_('debug')('engine.io-client:websocket');\nvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or the WebSocket-compatible interface\n * exposed by `ws` for Node environment.\n */\n\nvar WebSocket = BrowserWebSocket || (typeof window !== 'undefined' ? null : _dereq_('ws'));\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS(opts){\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function(){\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var self = this;\n  var uri = this.uri();\n  var protocols = void(0);\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n\n  this.ws = BrowserWebSocket ? new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'buffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function(){\n  var self = this;\n\n  this.ws.onopen = function(){\n    self.onOpen();\n  };\n  this.ws.onclose = function(){\n    self.onClose();\n  };\n  this.ws.onmessage = function(ev){\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function(e){\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Override `onData` to use a timer on iOS.\n * See: https://gist.github.com/mloughran/2052006\n *\n * @api private\n */\n\nif ('undefined' != typeof navigator\n  && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\n  WS.prototype.onData = function(data){\n    var self = this;\n    setTimeout(function(){\n      Transport.prototype.onData.call(self, data);\n    }, 0);\n  };\n}\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function(packets){\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function(packet) {\n      parser.encodePacket(packet, self.supportsBinary, function(data) {\n        if (!BrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' == typeof data ? global.Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        //Sometimes the websocket has already been closed but the browser didn't\n        //have a chance of informing us about it yet, in that case send will\n        //throw an error\n        try {\n          if (BrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e){\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done(){\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function(){\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function(){\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function(){\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function(){\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' == schema && this.port != 443)\n    || ('ws' == schema && this.port != 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function(){\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"../transport\":4,\"component-inherit\":16,\"debug\":17,\"engine.io-parser\":19,\"parseqs\":27,\"ws\":undefined,\"yeast\":30}],10:[function(_dereq_,module,exports){\n// browser shim for xmlhttprequest module\nvar hasCORS = _dereq_('has-cors');\n\nmodule.exports = function(opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' != typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' != typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new ActiveXObject('Microsoft.XMLHTTP');\n    } catch(e) { }\n  }\n}\n\n},{\"has-cors\":22}],11:[function(_dereq_,module,exports){\nmodule.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n\n},{}],12:[function(_dereq_,module,exports){\n/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n\n},{}],13:[function(_dereq_,module,exports){\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n\n},{}],14:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],15:[function(_dereq_,module,exports){\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n},{}],16:[function(_dereq_,module,exports){\n\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};\n},{}],17:[function(_dereq_,module,exports){\n\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = _dereq_('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage(){\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n},{\"./debug\":18}],18:[function(_dereq_,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = _dereq_('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n},{\"ms\":25}],19:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar keys = _dereq_('./keys');\nvar hasBinary = _dereq_('has-binary');\nvar sliceBuffer = _dereq_('arraybuffer.slice');\nvar base64encoder = _dereq_('base64-arraybuffer');\nvar after = _dereq_('after');\nvar utf8 = _dereq_('utf8');\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = navigator.userAgent.match(/Android/i);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = _dereq_('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if ('function' == typeof supportsBinary) {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if ('function' == typeof utf8encode) {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof global.Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  // String data\n  if (typeof data == 'string' || data === undefined) {\n    if (data.charAt(0) == 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      try {\n        data = utf8.decode(data);\n      } catch (e) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!global.ArrayBuffer) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary == 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data != 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data == '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = ''\n    , n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (':' != chr) {\n      length += chr;\n    } else {\n      if ('' == length || (length != (n = Number(length)))) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      msg = data.substr(i + 1, n);\n\n      if (length != msg.length) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      if (msg.length) {\n        packet = exports.decodePacket(msg, binaryType, true);\n\n        if (err.type == packet.type && err.data == packet.data) {\n          // parser error in individual packet - ignoring payload\n          return callback(err, 0, 1);\n        }\n\n        var ret = callback(packet, i + n, l);\n        if (false === ret) return;\n      }\n\n      // advance cursor\n      i += n;\n      length = '';\n    }\n  }\n\n  if (length != '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  var numberTooLong = false;\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] == 255) break;\n\n      if (msgLength.length > 310) {\n        numberTooLong = true;\n        break;\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    if(numberTooLong) return callback(err, 0, 1);\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./keys\":20,\"after\":11,\"arraybuffer.slice\":12,\"base64-arraybuffer\":13,\"blob\":14,\"has-binary\":21,\"utf8\":29}],20:[function(_dereq_,module,exports){\n\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n\n},{}],21:[function(_dereq_,module,exports){\n(function (global){\n\n/*\n * Module requirements.\n */\n\nvar isArray = _dereq_('isarray');\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Right now only Buffer and ArrayBuffer are supported..\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary(data) {\n\n  function _hasBinary(obj) {\n    if (!obj) return false;\n\n    if ( (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n         (global.Blob && obj instanceof Blob) ||\n         (global.File && obj instanceof File)\n        ) {\n      return true;\n    }\n\n    if (isArray(obj)) {\n      for (var i = 0; i < obj.length; i++) {\n          if (_hasBinary(obj[i])) {\n              return true;\n          }\n      }\n    } else if (obj && 'object' == typeof obj) {\n      if (obj.toJSON) {\n        obj = obj.toJSON();\n      }\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return _hasBinary(data);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"isarray\":24}],22:[function(_dereq_,module,exports){\n\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n\n},{}],23:[function(_dereq_,module,exports){\n\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n},{}],24:[function(_dereq_,module,exports){\nmodule.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n},{}],25:[function(_dereq_,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options.long\n    ? long(val)\n    : short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = '' + str;\n  if (str.length > 10000) return;\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n},{}],26:[function(_dereq_,module,exports){\n(function (global){\n/**\n * JSON parse.\n *\n * @see Based on jQuery#parseJSON (MIT) and JSON2\n * @api private\n */\n\nvar rvalidchars = /^[\\],:{}\\s]*$/;\nvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\nvar rtrimLeft = /^\\s+/;\nvar rtrimRight = /\\s+$/;\n\nmodule.exports = function parsejson(data) {\n  if ('string' != typeof data || !data) {\n    return null;\n  }\n\n  data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\n\n  // Attempt to parse using the native JSON parser first\n  if (global.JSON && JSON.parse) {\n    return JSON.parse(data);\n  }\n\n  if (rvalidchars.test(data.replace(rvalidescape, '@')\n      .replace(rvalidtokens, ']')\n      .replace(rvalidbraces, ''))) {\n    return (new Function('return ' + data))();\n  }\n};\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],27:[function(_dereq_,module,exports){\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n\n},{}],28:[function(_dereq_,module,exports){\n/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    return uri;\n};\n\n},{}],29:[function(_dereq_,module,exports){\n(function (global){\n/*! https://mths.be/utf8js v2.0.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, its not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tvar byte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.0.0',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],30:[function(_dereq_,module,exports){\n'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n\n},{}],31:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar url = _dereq_('./url');\nvar parser = _dereq_('socket.io-parser');\nvar Manager = _dereq_('./manager');\nvar debug = _dereq_('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup(uri, opts) {\n  if (typeof uri == 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n\n  return io.socket(parsed.path);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = _dereq_('./manager');\nexports.Socket = _dereq_('./socket');\n\n},{\"./manager\":32,\"./socket\":34,\"./url\":35,\"debug\":39,\"socket.io-parser\":47}],32:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar eio = _dereq_('engine.io-client');\nvar Socket = _dereq_('./socket');\nvar Emitter = _dereq_('component-emitter');\nvar parser = _dereq_('socket.io-parser');\nvar on = _dereq_('./on');\nvar bind = _dereq_('component-bind');\nvar debug = _dereq_('debug')('socket.io-client:manager');\nvar indexOf = _dereq_('indexof');\nvar Backoff = _dereq_('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager(uri, opts){\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' == typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  this.encoder = new parser.Encoder();\n  this.decoder = new parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function() {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function(){\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.engine.id;\n    }\n  }\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function(v){\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function(v){\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function(v){\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function(v){\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function(v){\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function(v){\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function() {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function(fn){\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function() {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function(data){\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function(){\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function(){\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function(){\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function(){\n  this.lastPing = new Date;\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function(){\n  this.emitAll('pong', new Date - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function(data){\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function(packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function(err){\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function(nsp){\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function(){\n      socket.id = self.engine.id;\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting evnet is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting() {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function(socket){\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function(packet){\n  debug('writing packet %j', packet);\n  var self = this;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function(encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function() {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function(){\n  debug('cleanup');\n\n  var sub;\n  while (sub = this.subs.shift()) sub.destroy();\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function(){\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' == this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function(reason){\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function(){\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function(){\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function(err){\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function(){\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function(){\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n\n},{\"./on\":33,\"./socket\":34,\"backo2\":36,\"component-bind\":37,\"component-emitter\":38,\"debug\":39,\"engine.io-client\":1,\"indexof\":42,\"socket.io-parser\":47}],33:[function(_dereq_,module,exports){\n\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on(obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function(){\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n\n},{}],34:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar parser = _dereq_('socket.io-parser');\nvar Emitter = _dereq_('component-emitter');\nvar toArray = _dereq_('to-array');\nvar on = _dereq_('./on');\nvar bind = _dereq_('component-bind');\nvar debug = _dereq_('debug')('socket.io-client:socket');\nvar hasBin = _dereq_('has-binary');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket(io, nsp){\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function() {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function(){\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' == this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function(){\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function(ev){\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var parserType = parser.EVENT; // default\n  if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\n  var packet = { type: parserType, data: args };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' == typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  delete this.flags;\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function(packet){\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function(){\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' != this.nsp) {\n    this.packet({ type: parser.CONNECT });\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function(reason){\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function(packet){\n  if (packet.nsp != this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function(packet){\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function(id){\n  var self = this;\n  var sent = false;\n  return function(){\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    var type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n    self.packet({\n      type: type,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function(packet){\n  var ack = this.acks[packet.id];\n  if ('function' == typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function(){\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function(){\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function(){\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function(){\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function(){\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function(compress){\n  this.flags = this.flags || {};\n  this.flags.compress = compress;\n  return this;\n};\n\n},{\"./on\":33,\"component-bind\":37,\"component-emitter\":38,\"debug\":39,\"has-binary\":41,\"socket.io-parser\":47,\"to-array\":51}],35:[function(_dereq_,module,exports){\n(function (global){\n\n/**\n * Module dependencies.\n */\n\nvar parseuri = _dereq_('parseuri');\nvar debug = _dereq_('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url(uri, loc){\n  var obj = uri;\n\n  // default to window.location\n  var loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' == typeof uri) {\n    if ('/' == uri.charAt(0)) {\n      if ('/' == uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' != typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    }\n    else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port == obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"debug\":39,\"parseuri\":45}],36:[function(_dereq_,module,exports){\n\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n\n},{}],37:[function(_dereq_,module,exports){\n/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n\n},{}],38:[function(_dereq_,module,exports){\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks['$' + event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n},{}],39:[function(_dereq_,module,exports){\narguments[4][17][0].apply(exports,arguments)\n},{\"./debug\":40,\"dup\":17}],40:[function(_dereq_,module,exports){\narguments[4][18][0].apply(exports,arguments)\n},{\"dup\":18,\"ms\":44}],41:[function(_dereq_,module,exports){\n(function (global){\n\n/*\n * Module requirements.\n */\n\nvar isArray = _dereq_('isarray');\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Right now only Buffer and ArrayBuffer are supported..\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary(data) {\n\n  function _hasBinary(obj) {\n    if (!obj) return false;\n\n    if ( (global.Buffer && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n         (global.Blob && obj instanceof Blob) ||\n         (global.File && obj instanceof File)\n        ) {\n      return true;\n    }\n\n    if (isArray(obj)) {\n      for (var i = 0; i < obj.length; i++) {\n          if (_hasBinary(obj[i])) {\n              return true;\n          }\n      }\n    } else if (obj && 'object' == typeof obj) {\n      // see: https://github.com/Automattic/has-binary/pull/4\n      if (obj.toJSON && 'function' == typeof obj.toJSON) {\n        obj = obj.toJSON();\n      }\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return _hasBinary(data);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"isarray\":43}],42:[function(_dereq_,module,exports){\narguments[4][23][0].apply(exports,arguments)\n},{\"dup\":23}],43:[function(_dereq_,module,exports){\narguments[4][24][0].apply(exports,arguments)\n},{\"dup\":24}],44:[function(_dereq_,module,exports){\narguments[4][25][0].apply(exports,arguments)\n},{\"dup\":25}],45:[function(_dereq_,module,exports){\narguments[4][28][0].apply(exports,arguments)\n},{\"dup\":28}],46:[function(_dereq_,module,exports){\n(function (global){\n/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = _dereq_('isarray');\nvar isBuf = _dereq_('./is-buffer');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet){\n  var buffers = [];\n  var packetData = packet.data;\n\n  function _deconstructPacket(data) {\n    if (!data) return data;\n\n    if (isBuf(data)) {\n      var placeholder = { _placeholder: true, num: buffers.length };\n      buffers.push(data);\n      return placeholder;\n    } else if (isArray(data)) {\n      var newData = new Array(data.length);\n      for (var i = 0; i < data.length; i++) {\n        newData[i] = _deconstructPacket(data[i]);\n      }\n      return newData;\n    } else if ('object' == typeof data && !(data instanceof Date)) {\n      var newData = {};\n      for (var key in data) {\n        newData[key] = _deconstructPacket(data[key]);\n      }\n      return newData;\n    }\n    return data;\n  }\n\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  var curPlaceHolder = 0;\n\n  function _reconstructPacket(data) {\n    if (data && data._placeholder) {\n      var buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\n      return buf;\n    } else if (isArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        data[i] = _reconstructPacket(data[i]);\n      }\n      return data;\n    } else if (data && 'object' == typeof data) {\n      for (var key in data) {\n        data[key] = _reconstructPacket(data[key]);\n      }\n      return data;\n    }\n    return data;\n  }\n\n  packet.data = _reconstructPacket(packet.data);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((global.Blob && obj instanceof Blob) ||\n        (global.File && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (obj && 'object' == typeof obj && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./is-buffer\":48,\"isarray\":43}],47:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar debug = _dereq_('debug')('socket.io-parser');\nvar json = _dereq_('json3');\nvar isArray = _dereq_('isarray');\nvar Emitter = _dereq_('component-emitter');\nvar binary = _dereq_('./binary');\nvar isBuf = _dereq_('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'BINARY_EVENT',\n  'ACK',\n  'BINARY_ACK',\n  'ERROR'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    encodeAsBinary(obj, callback);\n  }\n  else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n  var str = '';\n  var nsp = false;\n\n  // first is type\n  str += obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    str += obj.attachments;\n    str += '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' != obj.nsp) {\n    nsp = true;\n    str += obj.nsp;\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    if (nsp) {\n      str += ',';\n      nsp = false;\n    }\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    if (nsp) str += ',';\n    str += json.stringify(obj.data);\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if ('string' == typeof obj) {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var p = {};\n  var i = 0;\n\n  // look up type\n  p.type = Number(str.charAt(0));\n  if (null == exports.types[p.type]) return error();\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\n    var buf = '';\n    while (str.charAt(++i) != '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) != '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' == str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' == c) break;\n      p.nsp += c;\n      if (i == str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i == str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    try {\n      p.data = json.parse(str.substr(i));\n    } catch(e){\n      return error();\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length == this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(data){\n  return {\n    type: exports.ERROR,\n    data: 'parser error'\n  };\n}\n\n},{\"./binary\":46,\"./is-buffer\":48,\"component-emitter\":49,\"debug\":39,\"isarray\":43,\"json3\":50}],48:[function(_dereq_,module,exports){\n(function (global){\n\nmodule.exports = isBuf;\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],49:[function(_dereq_,module,exports){\narguments[4][15][0].apply(exports,arguments)\n},{\"dup\":15}],50:[function(_dereq_,module,exports){\n(function (global){\n/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n        String = context[\"String\"] || root[\"String\"],\n        Object = context[\"Object\"] || root[\"Object\"],\n        Date = context[\"Date\"] || root[\"Date\"],\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n        Math = context[\"Math\"] || root[\"Math\"],\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty, forEach, undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n        // but clips the values returned by the date methods to the range of\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undef &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undef) === undef &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undef &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undef]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                // serialize extended years.\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                // The milliseconds are optional in ES 5, but required in 5.1.\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                // values less than 1000. Credits: @Yaffle.\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {}, constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__, result = property in (this.__proto__ = null, this);\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0, Properties, members, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                  // Months, dates, hours, minutes, and seconds should have two\n                  // digits; milliseconds should have three.\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root[\"JSON3\"],\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],51:[function(_dereq_,module,exports){\nmodule.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n\n},{}]},{},[31])(31)\n});\n\n}"]}